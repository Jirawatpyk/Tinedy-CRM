# Test Data Requirements - Story 2.5: Quality Control Checklist Management

**Story**: 2.5 Quality Control Checklist Management
**Created By**: Taylor (QA Engineer)
**Date**: 2025-09-28
**Version**: 1.0

## Overview

เอกสารนี้กำหนดข้อมูลทดสอบที่จำเป็นสำหรับการทดสอบระบบจัดการ Checklist Templates และ Execution ให้ครอบคลุมทั้ง functional และ edge case scenarios

## Test Data Categories

### 1. User Test Data

#### Admin Users (2 accounts)
```json
[
  {
    "id": "admin-001",
    "email": "admin1@tinedy.com",
    "name": "นายสมชาย ผู้จัดการ",
    "role": "ADMIN",
    "isActive": true,
    "password": "Admin123!@#"
  },
  {
    "id": "admin-002",
    "email": "admin2@tinedy.com",
    "name": "นางสาวนิตยา หัวหน้า",
    "role": "ADMIN",
    "isActive": true,
    "password": "Admin456!@#"
  }
]
```

#### Operations Team Users (5 accounts)
```json
[
  {
    "id": "ops-001",
    "email": "ops1@tinedy.com",
    "name": "นายประยุทธ ช่างทำความสะอาด",
    "role": "OPERATIONS",
    "isActive": true,
    "password": "Ops123!@#"
  },
  {
    "id": "ops-002",
    "email": "ops2@tinedy.com",
    "name": "นางสมหวัง ผู้ฝึกอบรม",
    "role": "OPERATIONS",
    "isActive": true,
    "password": "Ops456!@#"
  },
  {
    "id": "ops-003",
    "email": "ops3@tinedy.com",
    "name": "นายสมศักดิ์ ทีมเก็บรายละเอียด",
    "role": "OPERATIONS",
    "isActive": true,
    "password": "Ops789!@#"
  },
  {
    "id": "ops-004",
    "email": "ops4@tinedy.com",
    "name": "นางวิไล ผู้ควบคุมคุณภาพ",
    "role": "OPERATIONS",
    "isActive": false,
    "password": "Ops101!@#"
  },
  {
    "id": "ops-005",
    "email": "ops5@tinedy.com",
    "name": "นายรณพล ช่างมืออาชีพ",
    "role": "OPERATIONS",
    "isActive": true,
    "password": "Ops202!@#"
  }
]
```

#### Test User for Authorization Testing
```json
{
  "id": "test-unauth",
  "email": "test@external.com",
  "name": "ทดสอบ ไม่มีสิทธิ์",
  "role": "TRAINING",
  "isActive": true,
  "password": "Test123!@#"
}
```

### 2. Customer Test Data

#### Standard Customers (10 customers)
```json
[
  {
    "id": "cust-001",
    "name": "บริษัท ทินิดี้ จำกัด",
    "phone": "02-123-4567",
    "email": "contact@tinedy.co.th",
    "address": "123 ถนนสุขุมวิท แขวงคลองเตย กรุงเทพฯ 10110",
    "contactChannel": "LINE",
    "status": "ACTIVE"
  },
  {
    "id": "cust-002",
    "name": "โรงแรม แกรนด์ พาลาซ",
    "phone": "02-234-5678",
    "email": "hr@grandpalace.com",
    "address": "456 ถนนราชดำเนิน เขตพระนคร กรุงเทพฯ 10200",
    "contactChannel": "PHONE",
    "status": "ACTIVE"
  },
  {
    "id": "cust-003",
    "name": "ศูนย์การค้า เซ็นทรัล เวิลด์",
    "phone": "02-345-6789",
    "email": "facility@centralworld.co.th",
    "address": "999/9 ถนนราชดำริ เขตปทุมวัน กรุงเทพฯ 10330",
    "contactChannel": "EMAIL",
    "status": "ACTIVE"
  },
  {
    "id": "cust-004",
    "name": "โรงเรียน เทพศิรินทร์",
    "phone": "02-456-7890",
    "email": "admin@debsirin.ac.th",
    "address": "296 ถนนราชดำเนิน เขตดุสิต กรุงเทพฯ 10300",
    "contactChannel": "LINE",
    "status": "ACTIVE"
  },
  {
    "id": "cust-005",
    "name": "คลินิก บิวตี้เฮ้าส์",
    "phone": "02-567-8901",
    "email": "info@beautyhouse.com",
    "address": "789 ถนนพลอยจิต เขตลุมพินี กรุงเทพฯ 10330",
    "contactChannel": "PHONE",
    "status": "ACTIVE"
  }
]
```

### 3. Job Test Data

#### Jobs for Different Service Types
```json
[
  {
    "id": "job-cleaning-001",
    "customerId": "cust-001",
    "serviceType": "CLEANING",
    "description": "ทำความสะอาดสำนักงานใหญ่ 5 ชั้น",
    "status": "NEW",
    "priority": "MEDIUM",
    "scheduledDate": "2025-10-01T09:00:00Z",
    "price": 15000.00,
    "notes": "ต้องทำตอนเสาร์-อาทิตย์เท่านั้น"
  },
  {
    "id": "job-cleaning-002",
    "customerId": "cust-002",
    "serviceType": "CLEANING",
    "description": "ทำความสะอาดห้องพัก 50 ห้อง",
    "status": "ASSIGNED",
    "priority": "HIGH",
    "scheduledDate": "2025-10-02T08:00:00Z",
    "assignedUserId": "ops-001",
    "price": 25000.00,
    "notes": "เช็คเอาท์เสร็จแล้ว พร้อมทำความสะอาด"
  },
  {
    "id": "job-training-001",
    "customerId": "cust-003",
    "serviceType": "TRAINING",
    "description": "ฝึกอบรมพนักงานรักษาความสะอาด",
    "status": "IN_PROGRESS",
    "priority": "MEDIUM",
    "scheduledDate": "2025-10-03T13:00:00Z",
    "assignedUserId": "ops-002",
    "price": 8000.00,
    "notes": "ฝึกอบรม 2 วัน วันละ 4 ชั่วโมง"
  },
  {
    "id": "job-training-002",
    "customerId": "cust-004",
    "serviceType": "TRAINING",
    "description": "อบรมการใช้เครื่องมือทำความสะอาดขั้นสูง",
    "status": "DONE",
    "priority": "LOW",
    "scheduledDate": "2025-09-25T10:00:00Z",
    "completedAt": "2025-09-25T16:00:00Z",
    "assignedUserId": "ops-002",
    "price": 12000.00,
    "notes": "อบรมเสร็จสมบูรณ์แล้ว"
  },
  {
    "id": "job-cleaning-003",
    "customerId": "cust-005",
    "serviceType": "CLEANING",
    "description": "ทำความสะอาดคลินิก รายเดือน",
    "status": "NEW",
    "priority": "URGENT",
    "scheduledDate": "2025-10-05T07:00:00Z",
    "price": 5000.00,
    "notes": "ต้องใช้เคมีพิเศษสำหรับคลินิก"
  }
]
```

### 4. Checklist Template Test Data

#### Basic Templates (10 templates)

##### CLEANING Service Templates
```json
[
  {
    "id": "template-cleaning-basic",
    "name": "ทำความสะอาดพื้นฐาน",
    "serviceType": "CLEANING",
    "items": [
      "เช็ดฝุ่นพื้นผิวทั้งหมด",
      "ดูดฝุ่นพรมและโซฟา",
      "ถูพื้นด้วยน้ำยาทำความสะอาด",
      "ล้างห้องน้ำและสุขภัณฑ์",
      "ทำความสะอาดกระจกและหน้าต่าง",
      "จัดระเบียบโต๊ะทำงาน",
      "เก็บขยะและใส่ถุงขยะใหม่"
    ]
  },
  {
    "id": "template-cleaning-deep",
    "name": "ทำความสะอาดแบบลึก",
    "serviceType": "CLEANING",
    "items": [
      "ทำความสะอาดแอร์คอนดิชันเนอร์",
      "ล้างพัดลมเพดานและโคมไฟ",
      "ขัดล้างพื้นด้วยเครื่องขัดพื้น",
      "ทำความสะอาดผนังและฝ้าเพดาน",
      "ล้างม่านและผ้าตกแต่ง",
      "ทำความสะอาดเครื่องใช้ไฟฟ้า",
      "ฆ่าเชื้อโรคทั้งพื้นที่",
      "ตรวจสอบมุมต่างๆ ให้สะอาดหมดจด"
    ]
  },
  {
    "id": "template-cleaning-office",
    "name": "ทำความสะอาดสำนักงาน",
    "serviceType": "CLEANING",
    "items": [
      "เช็ดโต๊ะทำงานและเก้าอี้",
      "ทำความสะอาดอุปกรณ์คอมพิวเตอร์",
      "จัดระเบียบเอกสารและของใช้",
      "ทำความสะอาดห้องประชุม",
      "เช็ดกระดานและอุปกรณ์นำเสนอ",
      "ทำความสะอาดพื้นที่พักผ่อน",
      "ตรวจสอบและเติมอุปกรณ์สำนักงาน"
    ]
  },
  {
    "id": "template-cleaning-medical",
    "name": "ทำความสะอาดสถานพยาบาล",
    "serviceType": "CLEANING",
    "items": [
      "ใช้เคมีฆ่าเชื้อมาตรฐานโรงพยาบาล",
      "ทำความสะอาดเครื่องมือแพทย์",
      "ฆ่าเชื้อห้องตรวจและห้องผ่าตัด",
      "ทำความสะอาดเตียงผู้ป่วย",
      "จัดการขยะติดเชื้อตามมาตรฐาน",
      "ทำความสะอาดพื้นที่รอคอย",
      "ตรวจสอบระบบระบายอากาศ"
    ]
  },
  {
    "id": "template-cleaning-hotel",
    "name": "ทำความสะอาดโรงแรม",
    "serviceType": "CLEANING",
    "items": [
      "ทำเตียงและเปลี่ยนผ้าปูที่นอน",
      "ทำความสะอาดห้องน้ำโรงแรม",
      "เติมของใช้สำหรับแขก (สบู่, แชมพู)",
      "ดูดฝุ่นและจัดระเบียบห้องพัก",
      "ทำความสะอาดระเบียงและหน้าต่าง",
      "ตรวจสอบเครื่องใช้ไฟฟ้าในห้อง",
      "จัดของใช้และเครื่องดื่มต้อนรับ"
    ]
  }
]
```

##### TRAINING Service Templates
```json
[
  {
    "id": "template-training-basic",
    "name": "อบรมพื้นฐานการทำความสะอาด",
    "serviceType": "TRAINING",
    "items": [
      "แนะนำอุปกรณ์ทำความสะอาดพื้นฐาน",
      "สอนเทคนิคการเช็ดฝุ่นที่ถูกวิธี",
      "ฝึกการใช้เครื่องดูดฝุ่น",
      "สาธิตการถูพื้นแบบต่างๆ",
      "อบรมความปลอดภัยในการทำงาน",
      "ทดสอบความเข้าใจด้วยแบบฝึกหัด"
    ]
  },
  {
    "id": "template-training-advanced",
    "name": "อบรมการทำความสะอาดขั้นสูง",
    "serviceType": "TRAINING",
    "items": [
      "สอนการใช้เครื่องมือเฉพาะทาง",
      "อบรมการจัดการสารเคมี",
      "ฝึกเทคนิคการทำความสะอาดพิเศษ",
      "สาธิตการแก้ปัญหาเฉพาะหน้า",
      "อบรมการตรวจสอบคุณภาพงาน",
      "ฝึกทักษะการสื่อสารกับลูกค้า",
      "ทดสอบภาคปฏิบัติแบบครอบคลุม"
    ]
  },
  {
    "id": "template-training-safety",
    "name": "อบรมความปลอดภัยในการทำงาน",
    "serviceType": "TRAINING",
    "items": [
      "ศึกษากฎระเบียบความปลอดภัย",
      "อบรมการใช้อุปกรณ์ป้องกันส่วนบุคคล",
      "ฝึกการปฐมพยาบาลเบื้องต้น",
      "สาธิตการจัดการสถานการณ์ฉุกเฉิน",
      "อบรมการรายงานอุบัติเหตุ",
      "ทดสอบความรู้ด้านความปลอดภัย"
    ]
  },
  {
    "id": "template-training-customer",
    "name": "อบรมการบริการลูกค้า",
    "serviceType": "TRAINING",
    "items": [
      "สอนมารยาทและการแต่งกาย",
      "ฝึกทักษะการสื่อสาร",
      "อบรมการจัดการข้อร้องเรียน",
      "สาธิตการทำงานในพื้นที่ลูกค้า",
      "ฝึกการรายงานผลงาน",
      "ทดสอบสถานการณ์จำลอง"
    ]
  },
  {
    "id": "template-training-quality",
    "name": "อบรมการควบคุมคุณภาพ",
    "serviceType": "TRAINING",
    "items": [
      "สอนมาตรฐานคุณภาพองค์กร",
      "ฝึกการตรวจสอบงานหลังเสร็จสิ้น",
      "อบรมการใช้เครื่องมือตรวจวัด",
      "สาธิตการบันทึกผลการตรวจสอบ",
      "ฝึกการแก้ไขงานที่ไม่ได้มาตรฐาน",
      "ทดสอบการประเมินคุณภาพ"
    ]
  }
]
```

#### Complex Templates (2 templates with 20+ items)
```json
[
  {
    "id": "template-cleaning-comprehensive",
    "name": "ทำความสะอาดครอบคลุมทุกพื้นที่",
    "serviceType": "CLEANING",
    "items": [
      "เตรียมอุปกรณ์และสารทำความสะอาด",
      "ตรวจสอบพื้นที่ก่อนเริ่มงาน",
      "เช็ดฝุ่นจากเพดานถึงพื้น",
      "ทำความสะอาดโคมไฟและพัดลม",
      "ล้างหน้าต่างและกรอบหน้าต่าง",
      "ทำความสะอาดผนังและมุมต่างๆ",
      "ดูดฝุ่นเฟอร์นิเจอร์และผ้าตกแต่ง",
      "ถูพื้นด้วยน้ำยาเฉพาะ",
      "ขัดล้างพื้นหินอ่อนและไม้",
      "ทำความสะอาดห้องครัวทั้งหมด",
      "ล้างเครื่องใช้ไฟฟ้าในครัว",
      "ทำความสะอาดตู้เย็นภายในและภายนอก",
      "ล้างอ่างล้างจานและก๊อกน้ำ",
      "ทำความสะอาดห้องน้ำทุกห้อง",
      "ขัดสุขภัณฑ์ให้เงางาม",
      "ล้างกระจกห้องน้ำและอุปกรณ์",
      "เช็ดประตูและหน้าบานตู้",
      "จัดระเบียบและเก็บของใช้",
      "เก็บขยะและใส่ถุงขยะใหม่",
      "ฆ่าเชื้อพื้นที่ที่จำเป็น",
      "ตรวจสอบผลงานขั้นสุดท้าย",
      "บันทึกรายงานการทำงาน",
      "ทำความสะอาดอุปกรณ์หลังใช้งาน"
    ]
  }
]
```

#### Edge Case Templates
```json
[
  {
    "id": "template-empty",
    "name": "เทมเพลตว่าง",
    "serviceType": "CLEANING",
    "items": []
  },
  {
    "id": "template-single-item",
    "name": "งานเดียว",
    "serviceType": "TRAINING",
    "items": ["ทดสอบการทำงานเพียงรายการเดียว"]
  }
]
```

### 5. Checklist Instance Test Data

#### Active Instances (for testing execution)
```json
[
  {
    "id": "instance-001",
    "jobId": "job-cleaning-002",
    "templateId": "template-cleaning-basic",
    "itemStatus": {
      "เช็ดฝุ่นพื้นผิวทั้งหมด": true,
      "ดูดฝุ่นพรมและโซฟา": true,
      "ถูพื้นด้วยน้ำยาทำความสะอาด": false,
      "ล้างห้องน้ำและสุขภัณฑ์": false,
      "ทำความสะอาดกระจกและหน้าต่าง": false,
      "จัดระเบียบโต๊ะทำงาน": false,
      "เก็บขยะและใส่ถุงขยะใหม่": false
    },
    "completedAt": null
  },
  {
    "id": "instance-002",
    "jobId": "job-training-001",
    "templateId": "template-training-basic",
    "itemStatus": {
      "แนะนำอุปกรณ์ทำความสะอาดพื้นฐาน": true,
      "สอนเทคนิคการเช็ดฝุ่นที่ถูกวิธี": true,
      "ฝึกการใช้เครื่องดูดฝุ่น": true,
      "สาธิตการถูพื้นแบบต่างๆ": false,
      "อบรมความปลอดภัยในการทำงาน": false,
      "ทดสอบความเข้าใจด้วยแบบฝึกหัด": false
    },
    "completedAt": null
  }
]
```

#### Completed Instances (for testing history)
```json
[
  {
    "id": "instance-completed-001",
    "jobId": "job-training-002",
    "templateId": "template-training-advanced",
    "itemStatus": {
      "สอนการใช้เครื่องมือเฉพาะทาง": true,
      "อบรมการจัดการสารเคมี": true,
      "ฝึกเทคนิคการทำความสะอาดพิเศษ": true,
      "สาธิตการแก้ปัญหาเฉพาะหน้า": true,
      "อบรมการตรวจสอบคุณภาพงาน": true,
      "ฝึกทักษะการสื่อสารกับลูกค้า": true,
      "ทดสอบภาคปฏิบัติแบบครอบคลุม": true
    },
    "completedAt": "2025-09-25T15:30:00Z"
  }
]
```

## Test Data Scenarios

### Validation Testing Data

#### Invalid Template Names
```json
{
  "duplicateNames": [
    "ทำความสะอาดพื้นฐาน", // ซ้ำกับ existing template
    "ทำความสะอาดพื้นฐาน" // ชื่อเดียวกันใน service type เดียวกัน
  ],
  "invalidNames": [
    "", // empty string
    "a", // too short
    "ชื่อเทมเพลตที่ยาวเกินไปกว่าที่ระบบจะรองรับได้และอาจทำให้เกิดปัญหาในการแสดงผลหรือจัดเก็บข้อมูล", // too long
    "Template<script>alert('xss')</script>", // XSS attempt
    "Template'; DROP TABLE checklist_templates;--" // SQL injection attempt
  ]
}
```

#### Invalid Service Types
```json
{
  "invalidServiceTypes": [
    "INVALID_TYPE",
    "cleaning", // lowercase
    "TRAINING_ADVANCED", // non-existent
    null,
    undefined,
    123
  ]
}
```

#### Invalid Checklist Items
```json
{
  "invalidItems": [
    "not_an_array", // wrong type
    null,
    [null, undefined, ""], // invalid items in array
    ["<script>alert('xss')</script>"], // XSS in items
    Array(101).fill("Too many items") // exceeds reasonable limit
  ]
}
```

### Performance Testing Data

#### Large Dataset Templates (for scalability testing)
```json
{
  "templateCount": 1000,
  "templateNamePattern": "เทมเพลตทดสอบ #{id}",
  "serviceTypeDistribution": {
    "CLEANING": 600,
    "TRAINING": 400
  },
  "itemsPerTemplate": {
    "min": 5,
    "max": 50,
    "average": 15
  }
}
```

#### Concurrent User Scenarios
```json
{
  "concurrentUsers": 100,
  "actionsPerUser": [
    "Create template",
    "Edit template",
    "Delete template",
    "Attach checklist to job",
    "Update checklist status",
    "View template list"
  ],
  "testDuration": "10 minutes"
}
```

## Test Data Management

### Database Seeding Strategy

#### Development Environment
```sql
-- Seed basic test data for development
INSERT INTO users (id, email, name, role, password, isActive) VALUES
  ('admin-001', 'admin1@tinedy.com', 'นายสมชาย ผู้จัดการ', 'ADMIN', '$2b$10$hashedpassword', true),
  ('ops-001', 'ops1@tinedy.com', 'นายประยุทธ ช่างทำความสะอาด', 'OPERATIONS', '$2b$10$hashedpassword', true);

-- Seed customers and jobs
-- (Full SQL scripts will be provided separately)
```

#### Test Environment
```javascript
// Jest setup file for test data
export const seedTestData = async () => {
  await prisma.user.createMany({ data: testUsers });
  await prisma.customer.createMany({ data: testCustomers });
  await prisma.job.createMany({ data: testJobs });
  await prisma.checklistTemplate.createMany({ data: testTemplates });
};

export const cleanupTestData = async () => {
  await prisma.checklistInstance.deleteMany({});
  await prisma.checklistTemplate.deleteMany({});
  await prisma.job.deleteMany({});
  await prisma.customer.deleteMany({});
  await prisma.user.deleteMany({});
};
```

### Data Refresh Strategy

#### Daily Refresh (Staging Environment)
- Reset all test data at 2:00 AM
- Preserve performance testing results
- Clean up temporary test artifacts

#### Per-Test Isolation
- Each test suite uses isolated data
- Cleanup after each test execution
- No data pollution between tests

### Data Security

#### Sensitive Data Handling
```json
{
  "dataClassification": {
    "public": ["template names", "service types"],
    "internal": ["user names", "job descriptions"],
    "confidential": ["passwords", "customer data"],
    "restricted": ["audit logs", "system keys"]
  },
  "masking": {
    "email": "test***@tinedy.com",
    "phone": "02-XXX-XXXX",
    "address": "XXX ถนนXXX กรุงเทพฯ"
  }
}
```

## Test Data Validation

### Data Integrity Checks
1. **Foreign Key Constraints**: All references valid
2. **Enum Values**: Only valid enum values used
3. **Required Fields**: No null values in required fields
4. **JSON Structure**: Valid JSON for checklist items
5. **Date Formats**: ISO 8601 format for all dates

### Data Quality Metrics
- **Completeness**: 100% required fields populated
- **Consistency**: Uniform data formats across records
- **Accuracy**: Realistic and business-valid data
- **Timeliness**: Recent dates for active records

## Test Data Provisioning

### Automated Setup
```bash
# Development environment setup
npm run db:seed:dev

# Test environment setup
npm run db:seed:test

# Performance testing data
npm run db:seed:performance
```

### Manual Data Creation
- Admin interface for creating test templates
- Bulk import functionality for large datasets
- Data export for test result analysis

---

**Total Test Records:**
- **Users**: 8 accounts (2 admin, 5 operations, 1 test)
- **Customers**: 10 customers with varied profiles
- **Jobs**: 15 jobs across different service types and statuses
- **Templates**: 12 templates (10 standard, 2 edge cases)
- **Instances**: 5 instances (3 active, 2 completed)

**Estimated Data Size**: ~2MB
**Setup Time**: <5 minutes automated
**Reset Time**: <2 minutes automated